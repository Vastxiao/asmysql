<!DOCTYPE html>
<html>

<head>
  <title>AsMysql Documentation</title>
  <meta name="description" content="AsMysql - 一个基于 aiomysql 封装的异步 MySQL 客户端 Python 库">
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/docsify/lib/themes/vue.css">
</head>

<body>
  <div id="app">Loading...</div>

  <script>
    // ========== 全局配置 ==========
    var DEFAULT_VERSION = 'v2';  // 默认版本，统一配置，修改此处即可
    var supportedLangs = ['en-us', 'zh-cn'];  // 支持的语言列表
    // =============================

    /**
     * 全局语言切换函数
     * @param {string} targetLang - 目标语言 (en-us 或 zh-cn)
     */
    function switchLang(targetLang) {
      // 获取当前路径 (history 模式使用 pathname)
      var currentPath = window.location.pathname || '/';

      // 检查原始路径是否有尾部斜杠
      var hasTrailingSlash = currentPath.endsWith('/');

      // 解析路径: /v{version}/{lang}/{page...} 或 /v{version}/{page...}
      var pathParts = currentPath.split('/').filter(function (p) { return p !== ''; });

      // 构建新路径
      var newPath;

      if (pathParts.length === 0) {
        // 根路径 "/" -> 默认跳转到 /{DEFAULT_VERSION}/{targetLang}/
        newPath = '/' + DEFAULT_VERSION + '/' + targetLang + '/';
      } else if (pathParts[0].match(/^v\d+$/)) {
        // 路径以版本号开头 (如 v1, v2)
        var version = pathParts[0];

        if (pathParts.length >= 2 && supportedLangs.indexOf(pathParts[1]) !== -1) {
          // 已有语言标识: /v2/en-us/xxx -> /v2/{targetLang}/xxx
          pathParts[1] = targetLang;
          newPath = '/' + pathParts.join('/');
          // 如果原始路径有尾部斜杠，或者路径只有版本和语言（没有其他部分），添加尾部斜杠
          if (hasTrailingSlash || pathParts.length === 2) {
            newPath += '/';
          }
        } else {
          // 没有语言标识: /v2/xxx -> /v2/{targetLang}/xxx
          var restParts = pathParts.slice(1);
          newPath = '/' + version + '/' + targetLang + (restParts.length > 0 ? '/' + restParts.join('/') : '/');
          // 如果原始路径有尾部斜杠且还有其他部分，添加尾部斜杠
          if (hasTrailingSlash && restParts.length > 0) {
            newPath += '/';
          }
        }
      } else {
        // 其他路径: 直接跳转到默认版本的目标语言
        newPath = '/' + DEFAULT_VERSION + '/' + targetLang + '/';
      }

      // 确保路径格式正确
      if (!newPath.startsWith('/')) {
        newPath = '/' + newPath;
      }

      // 使用 history API 进行导航 (配合 docsify 的 history 模式)
      window.location.href = newPath;
    }
  </script>

  <script>
    window.$docsify = {
      // 文档标题，会显示在侧边栏顶部
      name: 'AsMysql Documentation',
      repo: 'https://github.com/vastxiao/asmysql',
      loadSidebar: true,
      loadNavbar: true,
      // 小屏设备下合并导航栏到侧边栏
      mergeNavbar: true,
      maxLevel: 2,
      subMaxLevel: 2,
      auto2top: true,
      homepage: 'README.md',
      notFoundPage: true,
      externalLinkTarget: '_blank',
      // 启用相对路径
      relativePath: true,
      // 启用封面页
      coverpage: true,
      // 只在访问主页时加载封面
      onlyCover: false,
      // 使用 history 模式路由
      routerMode: 'history',
    }
  </script>
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/docsify.min.js"></script>
  <!-- 表情符号 -->
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/emoji.min.js"></script>

  <!-- 搜索插件 -->
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/search.min.js"></script>

  <!--
  代码高亮
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-python.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/prismjs@1/components/prism-bash.min.js"></script>
  复制代码
  <script src="//cdn.jsdelivr.net/npm/docsify-copy-code/dist/docsify-copy-code.min.js"></script>
  分页
  <script src="//cdn.jsdelivr.net/npm/docsify-pagination/dist/docsify-pagination.min.js"></script>
  图片缩放
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/zoom-image.min.js"></script>

  外部链接
  <script src="//cdn.jsdelivr.net/npm/docsify/lib/plugins/external-script.min.js"></script>
  -->

</body>

</html>